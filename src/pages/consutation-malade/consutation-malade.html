<ion-header color = "menus">
  <ion-navbar color = "menus">

      <ion-buttons left>
            <button ion-button icon-only (click)="onToggleMenu()">
              <ion-icon name="menu"></ion-icon>
            </button>
          </ion-buttons>

    <ion-title>Consultation</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <h4>Ordonnance</h4>
   <form
      [formGroup]="form"
      (ngSubmit)="manage(form.value)">
   	  <ion-list
   	     margin-bottom>
          
          <ion-item>
             <ion-label floating>Description de la maladie du patient:</ion-label>
             <ion-textarea type="text" maxlength="250" formControlName="description"></ion-textarea >
          </ion-item>


         <!-- Assign the technologies FormArray to the form
              where we want to track/generate new input track fields -->
	     <div
	        formArrayName="technologies"
	        margin-bottom>


            <!-- Assign a FormGroupName property binding to track
                 and manage each separate generated input field.
                 Also iterate through the technologies FormArray to
                 correctly track/render new input fields against
                 existing fields -->
            <section
               [formGroupName]="i"
               *ngFor="let tech of form.controls.technologies.controls; let i = index">
               <ion-item-group>
                  <ion-item>
                     <ion-label floating>Nom du medicament:</ion-label>
                     <ion-input
                        type="text"
                        maxlength="50"
                        formControlName="name"></ion-input>
                  </ion-item>


                  <!-- Allow generated input field to be removed -->
                  <span
                     float-right
                     ion-button
                     icon-left
                     clear
                     *ngIf="form.controls.technologies.length > 1"
                     (click)="removeInputField(i)">
                     <ion-icon name="close"></ion-icon>
                     Remove
                  </span>
               </ion-item-group>
            </section>
         </div>


         <!-- Allow new input field to be generated/added -->
         <span
            ion-button
            float-left
            icon-left
            clear
            (click)="addNewInputField()" color = "menus">
               <ion-icon name="add"></ion-icon>
               Ajouter un m√©dicament 
         </span>
         <ion-item>
            <ion-label floating>Montant de la consultation</ion-label><br>
            <ion-input aria-placeholder="sum" formControlName="montant"></ion-input>
          </ion-item>


   	 </ion-list>


   	 <!-- Only allow form to be submitted IF validation criteria for
              input fields has been successfully passed -->
         <button
   	     ion-button
   	     block
   	     margin-top
   	     color="menus"
   	     text-center (click)="onSubmitForm()"  class="mbutton">Sauvegarder</button>
   </form>

</ion-content>